{% extends 'CcmSiaBundle::layout.html.twig' %}

{% block title %}SIA - Dashboard{% endblock %}

{% block css %}

    {{ parent() }}
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="{{ asset('bundles/ccmsia/css/responsive-calendar.css') }}" type="text/css"/>

{% endblock %}

{% block wrapper %}

        <div class="row">

            <div class="col-lg-12">
                <p></p>
{#                <h1 class="page-header">Solicitudes </h1>#}
            </div>
        </div>

        <div class="row">
            <div class="col-lg-6">
                 <div class="panel panel-default">
                    <div class="panel-heading">
                        <i class="fa fa-tags"></i> Últimas Solicitudes <span class="badge">{{ solicitudes|length }}</span>
                            <div class="pull-right">
                                <a href="{{ path('solicitud') }}"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i> Crear Solicitud</button></a>
                                <a href="{{ path('solicitud_seguimiento') }}"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-search"></i> Todas las solicitudes</button></a>
                            </div>
                    </div>
                    <!-- /.panel-heading -->
                    <div class="panel-body">
                        <table class="table">
                            <thead>
                            <tr>
                                <th>Id</th>
                                <th>Académico</th>
                                <th>Estatus</th>
                            </tr>
                            </thead>
                            <tbody>

                            {% for solicitud in solicitudes %}
                                <tr>
                                    <td>
                                        <a href="{{ path('solicitud_show', { 'id': solicitud.id }) }}"> {{ solicitud.id }}</a>
                                    </td>
                                    <td>
                                        {{ solicitud.academico }}
                                        <span class="pull-right text-muted small"><em>Inicia: {{ solicitud.inicio|date('y-m-d')}}</em>
                                    </span>
                                    </td>

                                    <td>

                                        {%  if solicitud.enviada %}
                                            <div class="pull-right">
                                            <span class="label label-success">
                                                    {{ 'Enviada' }}
                                            </span>
                                            </div>

                                                    {% else %}
                                        <div class="pull-right">
                                            <span class="label label-warning">
                                                    {{ 'No enviada' }}

                                            </span>
                                        </div>
                                                {% endif %}


                                    </td>

                                </tr>
                            {% endfor %}

                            </tbody>
                        </table>
                        <!-- /.table -->
                    </div>
                    <!-- /.panel-body -->
                </div>
                <!-- /.panel -->
            </div>

            <div class="col-lg-6">
                <div class="panel panel-default">
                    <div class="panel-heading"><i class="fa fa-university"></i> Sesiones de Consejo
                        <div class="pull-right">
                            <a href="{{ path('sesiones') }}"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-search"></i> Todas las sesiones</button></a>
                        </div>
                    </div>
                        <div class="panel-body">
                            <div class="responsive-calendar">
                                <div class="controls">
                                    <a class="pull-left" data-go="prev"><div class="btn btn-primary">Prev</div></a>
                                    <h4><span data-head-year></span> <span data-head-month></span></h4>
                                    <a class="pull-right" data-go="next"><div class="btn btn-primary">Next</div></a>
                                </div><hr/>
                                <div class="day-headers">
                                    <div class="day header">Mon</div>
                                    <div class="day header">Tue</div>
                                    <div class="day header">Wed</div>
                                    <div class="day header">Thu</div>
                                    <div class="day header">Fri</div>
                                    <div class="day header">Sat</div>
                                    <div class="day header">Sun</div>
                                </div>
                                <div class="days" data-group="days">

                                </div>
                            </div>

                        </div>
                </div>
            </div>

        </div>
        <!-- /.row -->

    <div class="row">
        <div class="col-lg-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-users fa-fw"></i> Académicos
                    {% if is_granted('ROLE_ADMIN') %}
                        <div class="pull-right">
                            <a href="{{ path('academico_new') }}"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i> Crear Académico</button></a>
                            <a href="{{ path('academico') }}"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-search"></i> Todos los académicos</button></a>
                        </div>
                    {% else %}

                    {% for academico in academicos %}
                        <div class="pull-right">
                            <a href="{{ path('academico_edit', { 'id':  academico.id })   }}"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-pencil-square-o"></i> Modificar </button></a>

                        </div>

                    {% endfor %}
                    {% endif %}
                </div>

                <!-- /.panel-heading -->
                <div class="panel-body">

                       <table class="table">
                            <thead>
                            <tr>
                                <th>&nbsp;</th>
                                <th>Nombre</th>
                                <th>Asignación Anual</th>
                            </tr>
                            </thead>
                            <tbody>

                            {% for academico in academicos %}
                                <tr>
                                    <td>
                                        <img src="http://placekitten.com/g/150/150" alt="..." class="img-circle" style="width: 50px; height: 50px;">
                                    </td>
                                    <td>
                                        <a href="{{ path('academico_show', { 'id': academico.id }) }}">{{ academico.name }}</a>
                                    </td>
                                    <td>
                                        {#{{ academico.dias }}#}
                                        {% set asignacion = (academico.asignacion * 100)/30000 %}

                                        <div class="progress">
                                                <div class="progress-bar progress-bar-warning"
                                                     role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: {{ asignacion }}%">
                                                        <span class="sr-only">40% Complete (success)</span><span class="text-danger">{{ asignacion|number_format }}%</span>
                                                </div>
                                        </div>
                                    </td>

                                    <td>
                                        <a href="{{ path('academico_edit', { 'id':  academico.id })   }}" class="btn btn-default btn-xs"><i class="fa fa-pencil-square-o"></i>  Editar</a>

                                    </td>


                                </tr>
                            {% endfor %}

                            </tbody>
                        </table>
                        <!-- /.table -->
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>

        <div class="col-lg-6">
            <div class="panel panel-default">
                <div class="panel-heading"><i class="fa fa-file-text-o"></i> Proyectos
                {% if is_granted('ROLE_ADMIN') %}
                    <div class="pull-right">
                        <a href="{{ path('proyecto_new') }}"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i> Crear Proyecto</button></a>
                        <a href="{{ path('proyecto') }}"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-search"></i> Todos los proyectos</button></a>
                    </div>

                {% endif %}
                </div>
                    <div class="panel-body">

                        <table class="table">
                            <thead>
                            <tr>
                                <th>Nombre</th>

                                <th>Número</th>
                            </tr>
                            </thead>
                            <tbody>

                            {% for proyecto in proyectos %}
                                <tr>

                                    <td>
                                        {{ proyecto.nombre }}
                                    </td>
                                    <td>
                                        {{ proyecto.numero }}
                                    </td>

                                    <td>
                                        <a href="{{ path('proyecto_edit', { 'id':  proyecto.id })   }}"><i class="fa fa-pencil-square-o"></i> </a>

                                    </td>


                                </tr>
                            {% endfor %}

                            </tbody>
                        </table>
                        <!-- /.table -->
                    </div>


            </div>
        </div>

    </div>
    <!-- /.row -->
    </div>

{% endblock %}


{% block javascript %}

    {{ parent() }}

    <script src="{{ asset('bundles/ccmsia/js/responsive-calendar.js')}}"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $(".responsive-calendar").responsiveCalendar({
          time: '2014-10',
//          translateMonths: {"January": "Enero", "February": "Febrero", "March": "Marzo", "April": "Abril", "May": "Mayo", "June": "Junio", "July": "Julio", "August": "Agosto", "September": "Septiembre", "October": "Octubre", "November": "Noviembre", "December": "Diciembre"},
          monthChangeAnimation: false,
          events: {
            "2014-10-30": {"number": 5, "url": "http://w3widgets.com/responsive-slider"},
            "2014-10-26": {"number": 1, "url": "http://w3widgets.com"},
            "2014-11-03":{"number": 1},
            "2014-11-12": {}}
        });
      });
    </script>

{% endblock %}
