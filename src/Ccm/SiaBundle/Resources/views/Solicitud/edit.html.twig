{% extends 'CcmSiaBundle::layout.html.twig' %}

{% block wrapper%}


    {{ form_start(edit_form) }}

    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Modificar Solicitud</h1>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <div class="col-lg-4">
                <div ng-controller="DatepickerDemoCtrl" class="form-group input-group" ng-init="inicio='{{ entity.inicio|date("Y-m-d") }}';">
                    <div>{{ form_label(edit_form.inicio) }}</div>
                    <div>{{ form_errors(edit_form.inicio) }}
                    {{ form_widget(edit_form.inicio, { 'attr': {
                    'class': 'form-control',
                    'datepicker-popup': 'yyyy-MM-dd',
                    'ng-model':'inicio',
                    'is-open':'opened',
                    'min-date':'minDate',
                    'max-date':"'2015-06-22'",
                    'datepicker-options':'dateOptions',
                    'ng-required':'true',
                    'close-text':'Close' } } ) }}
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                        </span>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div ng-controller="DatepickerDemoCtrl" class="form-group input-group" ng-init="fin='{{ entity.fin|date("Y-m-d") }}';">
                    <div>{{ form_label(edit_form.fin) }}</div>
                    <div>{{ form_errors(edit_form.fin) }}
                    {{ form_widget(edit_form.fin, { 'attr': {
                    'class': 'form-control',
                    'datepicker-popup': 'yyyy-MM-dd',
                    'ng-model':'fin',
                    'is-open':'opened',
                    'min-date':'minDate',
                    'max-date':"'2015-06-22'",
                    'datepicker-options':'dateOptions',
                    'ng-required':'true',
                    'close-text':'Close' } } ) }}
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                        </span>
                    <b id='days'> </b>
                </div>
                </div>

            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <div class="col-lg-4">
                <div class="form-group">
                    <div>
                        {{ form_label(edit_form.tipo) }}
                    </div>
                    <div>
                        {{ form_errors(edit_form.tipo) }}
                        {{ form_widget(edit_form.tipo, {'attr': {'class': 'form-control'} } ) }}
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    <div>
                        {{ form_label(edit_form.proyecto) }}
                    </div>
                    <div>
                        {{ form_errors(edit_form.proyecto) }}
                        {{ form_widget(edit_form.proyecto, {'attr': {'class': 'form-control'} } ) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <div class="col-lg-4">
                <div class="form-group">
                    <div>
                        {{ form_label(edit_form.academico) }}
                    </div>
                    <div>
                        {{ form_errors(edit_form.academico) }}
                        {{ form_widget(edit_form.academico, {'attr': {'class': 'form-control'} } ) }}
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="form-group">
                    <div>
                        {{ form_label(edit_form.sesion) }}
                    </div>
                    <div>
                        {{ form_errors(edit_form.sesion) }}
                        {{ form_widget(edit_form.sesion, {'attr': {'class': 'form-control'} } ) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <div class="col-lg-4">
                <div class="form-group">
                    <div>
                        {{ form_label(edit_form.pais) }}
                    </div>
                    <div>
                        {{ form_errors(edit_form.pais) }}
                        {{ form_widget(edit_form.pais, {'attr': {'class': 'form-control'} } ) }}
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="form-group">
                    <div>
                        {{ form_label(edit_form.ciudad) }}
                    </div>
                    <div>
                        {{ form_errors(edit_form.ciudad) }}
                        {{ form_widget(edit_form.ciudad, {'attr': {'class': 'form-control'} } ) }}
                    </div>
                </div>
            </div>

        </div>
    </div>


    <div class="row">
        <div class="col-lg-8">
            <div class="col-lg-8">
                <div class="form-group">
                    <div>
                        {{ form_label(edit_form.universidad) }}
                    </div>
                    <div>
                        {{ form_errors(edit_form.universidad) }}
                        {{ form_widget(edit_form.universidad, {'attr': {'class': 'form-control'} } ) }}
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="form-group">
                    <div>
                        {{ form_label(edit_form.actividad) }}
                    </div>
                    <div>
                        {{ form_errors(edit_form.actividad) }}
                        {{ form_widget(edit_form.actividad, {'attr': {'class': 'form-control'} } ) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <div class="col-lg-8">
                <div class="form-group">
                    <div>
                        {{ form_label(edit_form.profesor) }}
                    </div>
                    <div>
                        {{ form_errors(edit_form.profesor) }}
                        {{ form_widget(edit_form.profesor, {'attr': {'class': 'form-control'} } ) }}
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="form-group">
                    <div>
                        {{ form_label(edit_form.proposito) }}
                    </div>
                    <div>
                        {{ form_errors(edit_form.proposito) }}
                        {{ form_widget(edit_form.proposito, {'attr': {'class': 'form-control'} } ) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <div class="col-lg-8">
                <div class="form-group">
                    <div>
                        {{ form_label(edit_form.trabajo) }}
                    </div>
                    <div>
                        {{ form_errors(edit_form.trabajo) }}
                        {{ form_widget(edit_form.trabajo, {'attr': {'class': 'form-control'} } ) }}
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <div class="col-lg-12">
                <div class="form-group">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                            <tr>
                                <th>&nbsp;</th>
                                <th>CCM</th>
                                <th>PAPIIT</th>
                                <th>Conacyt</th>
                                <th>Otro</th>
                            </tr>
                            </thead>
                            <tbody>

                            {% for fin in edit_form.financiamiento %}
                                <tr>
                                    <td>{{ form_widget(fin.nombre, { 'attr':{'class': 'form-control','readonly':'true'} }) }}</td>
                                    <td>{{ form_widget(fin.ccm, { 'attr':{'class': 'form-control'} }) }}</td>
                                    <td>{{ form_widget(fin.papiit, { 'attr':{'class': 'form-control'} }) }}</td>
                                    <td>{{ form_widget(fin.conacyt, { 'attr':{'class': 'form-control'} }) }}</td>
                                    <td>{{ form_widget(fin.otro, { 'attr':{'class': 'form-control'} }) }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-lg-8">
            <div class="col-lg-12">
                {{ form_widget(edit_form.save,{'attr':{'class':'btn btn-primary'} } )}}
                {{ form_widget(edit_form.save,{'attr':{'class':'btn btn-primary'} } )}}
                <a href="{{ path('solicitud') }}" type="button"  class="btn btn-danger">Cancelar</a>
            </div>
        </div>
    </div>

    {{ form_rest(edit_form) }}
    {{ form_end(edit_form) }}

    <br>
    <div>
        {% if is_granted('ROLE_PREVIOUS_ADMIN') %}
            <ul>
                <li>
                    <a href="{{ path('solicitud', {'_switch_user': '_exit'}) }}">Exit impersonation</a>
                </li>
            </ul>
        {% endif %}
    </div>
    </form>

{% endblock %}
